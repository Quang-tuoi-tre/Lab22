@model IEnumerable<Lab22.Models.CartItem>

@{
    ViewData["Title"] = "Index";
}

<h2 style="text-align:center">THÔNG TIN GIỎ HÀNG</h2>
<table class="table" align="center" border="1">
<thead>
<tr style="text-align:center; font-weight:bold">
<td> Tên Sản phẩm </td>
<td> Hình ảnh </td>
<td> Số lượng </td>
<td> Đơn giá </td>
<td> Thành tiền </td>
<td width="50px"></td>
<td width="50px"></td>
<td width="50px"></td>
</tr>
</thead>
<tbody>
@foreach (var item in Model)
{
<tr style="text-align:center; font-weight:bold">
<td> @Html.DisplayFor(modelItem => item.Name) </td>
                <td>
                    @if (item.Image != null)
                    {
                        <img src="@item.Image" width="150px" />
                    }
                    else
                    {

                        <h5>Không có hình ảnh</h5>
                    }
                </td>
                <td>
                <td>
                    <input id="txtQuantity_@item.Id" onchange="updateCart('@item.Id')" type="number" min="1" name="txtQuantity" value="@item.Quantity"
                           style="background-color:yellow" />
                </td>

<td> @string.Format("{0:0,0}", item.Price) </td>
<td> @string.Format("{0:0,0}", item.Price * item.Quantity) </td>
                <td>
                    <a asp-controller="Product" asp-action="Details" asp-route-id="@item.Id">Details</a>
                </td>
                <td> <a asp-action="DeleteCart" asp-route-id="@item.Id">Xóa</a></td>
            </tr>
}
        <tr style="font-weight:bold; text-align:right; color:red">
            <td colspan="5"> Tổng Số: @ViewBag.TongSoLuong </td>
            <td colspan="5">
                Tổng tiền: @String.Format("{0:0,0}",

                ViewBag.TongTien) VNĐ
            </td>

        </tr>
        <tr style="font-weight:bold; color:blue; text-align:right">
            <td colspan="9">
                <a asp-action="Delete">Xóa Giỏ Hàng</a>

            </td>

        </tr>
        <tr style="font-weight:bold; color:blue; text-align:right">
            <td colspan="9" align="center">
                <a asp-action="Order">
                    Đặt

                    hàng
                </a>
            </td>
        </tr>
        <script>
function updateCart(productId) {
var quantity = document.getElementById('txtQuantity_' +
productId).value;
window.location.href = '/ShoppingCart/UpdateCart?id=' + productId +
'&quantity=' + quantity;
}
</script>
    </tbody>
</table>